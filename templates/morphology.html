<!-- Cleaned Morphology Template - Focus on What Works -->
<div class="section-card">
    <h3>üîß Affix Management</h3>
    <p style="margin-bottom: 20px; color: #666;">View, edit, and manage all morphological affixes in your language. Generate new words by applying these affixes to existing vocabulary.</p>
    
    <!-- Add Custom Affix Section -->
    <div class="word-builder" style="background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%); border-color: #ff9800;">
        <h4>‚ûï Add Custom Affix</h4>
        <p style="margin-bottom: 20px; color: #666;">Create your own derivational affixes and morphological rules.</p>
        
        <div class="form-grid-4">
            <div class="form-group">
                <label for="custom-affix-name">Affix Name</label>
                <input type="text" id="custom-affix-name" class="form-control" placeholder="e.g., causative, agentive">
            </div>
            
            <div class="form-group">
                <label for="custom-affix-morpheme">Morpheme</label>
                <input type="text" id="custom-affix-morpheme" class="form-control" placeholder="e.g., -ish, un-, -er">
            </div>
            
            <div class="form-group">
                <label for="custom-affix-type">Type</label>
                <select id="custom-affix-type" class="form-control">
                    <option value="suffix">Suffix</option>
                    <option value="prefix">Prefix</option>
                    <option value="infix">Infix</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="custom-affix-category">Category</label>
                <select id="custom-affix-category" class="form-control">
                    <option value="derivational">Derivational</option>
                    <option value="inflectional">Inflectional</option>
                    <option value="case">Case</option>
                    <option value="tense">Tense</option>
                    <option value="number">Number</option>
                    <option value="gender">Gender</option>
                </select>
            </div>
        </div>
        
        <div class="form-grid-2" style="margin-top: 15px;">
            <div class="form-group">
                <label for="custom-affix-description">Description</label>
                <input type="text" id="custom-affix-description" class="form-control" placeholder="What this affix does (e.g., makes verbs from nouns)">
            </div>
            
            <div class="form-group">
                <label>&nbsp;</label>
                <button class="btn btn-block" id="add-custom-affix-btn" style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);">
                    ‚ûï Add Affix
                </button>
            </div>
        </div>
    </div>
    
    <div id="affix-display" style="display: none;">
        <div class="result-card">
            <h4>üìã Case Affixes</h4>
            <div id="case-affixes"></div>
        </div>
        
        <div class="result-card">
            <h4>‚è∞ Tense Affixes</h4>
            <div id="tense-affixes"></div>
        </div>
        
        <div class="result-card">
            <h4>üî¢ Number Affixes</h4>
            <div id="number-affixes"></div>
        </div>
        
        <div class="result-card">
            <h4>‚ö• Gender Affixes</h4>
            <div id="gender-affixes"></div>
        </div>
        
        <div class="result-card">
            <h4>üîÑ Derivational Affixes</h4>
            <div id="derivational-affixes"></div>
        </div>
        
        <div class="result-card">
            <h4>üìê Inflectional Affixes</h4>
            <div id="inflectional-affixes"></div>
        </div>
    </div>
    
    <div id="no-affixes" style="text-align: center; color: #999; padding: 40px;">
        <h4>No affixes generated yet</h4>
        <p>Generate a grammar system first to see your morphological affixes!</p>
        <div style="display: flex; justify-content: center; margin-top: 20px;">
            <button class="btn" onclick="switchTab('grammar')" style="margin: 0 auto;">Go to Grammar Tab</button>
        </div>
    </div>
</div>

<!-- Compound Word Generation Section -->
<div class="section-card">
    <h3>üîó Compound Word Generator</h3>
    <p style="margin-bottom: 20px; color: #666;">Create compound words by combining existing vocabulary. Generate logical combinations for new concepts and expand your language naturally.</p>
    
    <div class="word-builder" style="background: linear-gradient(135deg, #e8f5e8 0%, #f0f8ff 100%); border-color: #4caf50;">
        <h4>üèóÔ∏è Manual Compound Builder</h4>
        <p style="margin-bottom: 20px; color: #666;">Manually combine two words to create a compound.</p>
        
        <div class="form-grid-3">
            <div class="form-group">
                <label for="compound-word1">First Word</label>
                <select id="compound-word1" class="form-control">
                    <option value="">Select first word...</option>
                    <!-- Will be populated with existing vocabulary -->
                </select>
            </div>
            
            <div class="form-group">
                <label for="compound-word2">Second Word</label>
                <select id="compound-word2" class="form-control">
                    <option value="">Select second word...</option>
                    <!-- Will be populated with existing vocabulary -->
                </select>
            </div>
            
            <div class="form-group">
                <label for="compound-meaning">New Meaning</label>
                <input type="text" id="compound-meaning" class="form-control" placeholder="What does the compound mean?">
            </div>
        </div>
        
        <div class="form-grid-1" style="margin-top: 15px;">
            <button class="btn btn-success btn-block" id="generate-compound-btn">
                üîó Generate Compound
            </button>
        </div>
        
        <!-- Compound Preview -->
        <div id="compound-preview" style="display: none; margin-top: 20px;">
            <div class="generated-word-display">
                <h5>Generated Compound:</h5>
                <div class="generated-word" id="compound-result"></div>
                <div id="compound-breakdown" style="color: #666; margin: 10px 0;"></div>
                <div id="compound-meaning-display" style="color: #555; font-style: italic; margin-bottom: 15px;"></div>
                
                <div style="display: flex; justify-content: center; margin-top: 20px;">
                    <button class="btn btn-success" id="add-compound-btn">
                        ‚ûï Add to Vocabulary
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="section-card">
    <h3>üéØ Affix Applicator</h3>
    <p style="margin-bottom: 20px; color: #666;">Apply affixes to existing words to create inflected forms.</p>
    
    <div class="form-grid-2">
        <div class="form-group">
            <label for="base-word">Base Word</label>
            <select id="base-word" class="form-control">
                <option value="">Select a word...</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="affix-to-apply">Affix to Apply</label>
            <select id="affix-to-apply" class="form-control">
                <option value="">Select an affix...</option>
            </select>
        </div>
    </div>
    
    <div id="affix-result" style="display: none; margin: 20px 0;">
        <div class="generated-word-display">
            <div class="generated-word" id="inflected-word"></div>
            <div style="color: #666; margin-bottom: 15px;" id="inflection-description"></div>
            
            <div style="display: flex; justify-content: center; margin-top: 20px;">
                <button class="btn btn-success" id="add-inflected-btn">
                    ‚ûï Add Derived Word to Dictionary
                </button>
            </div>
        </div>
    </div>
    
    <button class="btn btn-info btn-block" id="apply-affix-btn">
        üîß Apply Affix
    </button>
</div>

<!-- Edit Affix Modal -->
<div id="edit-affix-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h4>‚úèÔ∏è Edit Affix</h4>
            <span class="close" onclick="document.getElementById('edit-affix-modal').style.display='none'">&times;</span>
        </div>
        
        <div class="modal-body">
            <div class="form-group">
                <label for="edit-affix-name-field">Affix Name</label>
                <input type="text" id="edit-affix-name-field" class="form-control">
            </div>
            
            <div class="form-group">
                <label for="edit-affix-morpheme-field">Morpheme</label>
                <input type="text" id="edit-affix-morpheme-field" class="form-control">
            </div>
            
            <div class="form-group">
                <label for="edit-affix-type-field">Type</label>
                <select id="edit-affix-type-field" class="form-control">
                    <option value="prefix">Prefix</option>
                    <option value="suffix">Suffix</option>
                    <option value="infix">Infix</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="edit-affix-description-field">Description</label>
                <input type="text" id="edit-affix-description-field" class="form-control">
            </div>
            
            <div class="form-group">
                <label for="edit-affix-example-field">Example (optional)</label>
                <input type="text" id="edit-affix-example-field" class="form-control" placeholder="e.g., walk ‚Üí walker">
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="document.getElementById('edit-affix-modal').style.display='none'">Cancel</button>
            <button class="btn btn-success" onclick="MorphologyModule.saveAffixEdit()">Save Changes</button>
        </div>
    </div>
</div>